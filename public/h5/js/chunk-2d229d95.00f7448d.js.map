{"version":3,"sources":["webpack:///./src/views/user/PersonalData.vue?5958","webpack:///src/views/user/PersonalData.vue","webpack:///./src/views/user/PersonalData.vue?9b3a","webpack:///./src/views/user/PersonalData.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","crop","compress","headers","max-file-size","credentials","inputAccept","inputOfFile","url","on","imageuploaded","src","avatar","directives","name","rawName","value","userInfo","expression","type","domProps","input","$event","target","composing","$set","disabled","uid","phone","_e","to","click","submit","logout","staticRenderFns","PersonalDatavue_type_script_lang_js_","components","VueCoreImageUpload","vue_core_image_upload","data","concat","utils","Authorization","$store","state","app","token","isWeixin","watch","$route","n","dispatch","computed","Object","vuex_esm","mounted","methods","res","status","$dialog","error","msg","console","log","_this","user","nickname","then","success","$router","go","_this2","confirm","mes","opts","commit","wechat","location","href","origin","catch","err","user_PersonalDatavue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"h5/js/chunk-2d229d95.00f7448d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"personal-data\"},[_c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"item acea-row row-between-wrapper\"},[_c('div',[_vm._v(\"头像\")]),_c('VueCoreImageUpload',{ref:\"upImg\",staticClass:\"btn btn-primary\",attrs:{\"crop\":false,\"compress\":\"80\",\"headers\":_vm.headers,\"max-file-size\":5242880,\"credentials\":false,\"inputAccept\":\"image/*\",\"inputOfFile\":\"file\",\"url\":_vm.url},on:{\"imageuploaded\":_vm.imageuploaded}},[_c('div',{staticClass:\"pictrue\"},[_c('img',{attrs:{\"src\":_vm.avatar}})])])],1),_c('div',{staticClass:\"item acea-row row-between-wrapper\"},[_c('div',[_vm._v(\"昵称\")]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userInfo.nickname),expression:\"userInfo.nickname\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.userInfo.nickname)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.userInfo, \"nickname\", $event.target.value)}}})])]),_c('div',{staticClass:\"item acea-row row-between-wrapper\"},[_c('div',[_vm._v(\"ID号\")]),_c('div',{staticClass:\"input acea-row row-between-wrapper\"},[_c('input',{staticClass:\"id\",attrs:{\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":_vm.userInfo.uid}}),_c('span',{staticClass:\"iconfont icon-suozi\"})])]),(!_vm.userInfo.phone)?_c('div',[_c('router-link',{staticClass:\"item acea-row row-between-wrapper\",attrs:{\"to\":'/user/binding'}},[_c('div',[_vm._v(\"绑定手机号\")]),_c('div',{staticClass:\"input\"},[_vm._v(\"\\n          点击绑定手机号\"),_c('span',{staticClass:\"iconfont icon-xiangyou\"})])])],1):(_vm.userInfo.phone)?_c('div',{staticClass:\"item acea-row row-between-wrapper\"},[_c('div',[_vm._v(\"手机号码\")]),_c('div',{staticClass:\"input acea-row row-between-wrapper\"},[_c('div',{staticClass:\"input acea-row row-between-wrapper\"},[_c('input',{staticClass:\"id\",attrs:{\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":_vm.userInfo.phone}}),_c('span',{staticClass:\"iconfont icon-suozi\"})])])]):_vm._e(),(_vm.userInfo.phone)?_c('div',[_c('router-link',{staticClass:\"item acea-row row-between-wrapper\",attrs:{\"to\":'/change_password'}},[_c('div',[_vm._v(\"密码\")]),_c('div',{staticClass:\"input\"},[_vm._v(\"\\n          点击修改密码\"),_c('span',{staticClass:\"iconfont icon-xiangyou\"})])])],1):_vm._e()]),_c('div',{staticClass:\"modifyBnt bg-color-red\",on:{\"click\":_vm.submit}},[_vm._v(\"保存修改\")]),_c('div',{staticClass:\"logOut cart-color acea-row row-center-wrapper\",on:{\"click\":_vm.logout}},[_vm._v(\"\\n    退出登录\\n  \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"personal-data\">\n    <div class=\"list\">\n      <div class=\"item acea-row row-between-wrapper\">\n        <div>头像</div>\n        <VueCoreImageUpload\n          class=\"btn btn-primary\"\n          :crop=\"false\"\n          compress=\"80\"\n          @imageuploaded=\"imageuploaded\"\n          :headers=\"headers\"\n          :max-file-size=\"5242880\"\n          :credentials=\"false\"\n          inputAccept=\"image/*\"\n          inputOfFile=\"file\"\n          :url=\"url\"\n          ref=\"upImg\"\n        >\n          <div class=\"pictrue\">\n            <img :src=\"avatar\" />\n          </div>\n        </VueCoreImageUpload>\n      </div>\n      <div class=\"item acea-row row-between-wrapper\">\n        <div>昵称</div>\n        <div class=\"input\">\n          <input type=\"text\" v-model=\"userInfo.nickname\" />\n        </div>\n      </div>\n      <div class=\"item acea-row row-between-wrapper\">\n        <div>ID号</div>\n        <div class=\"input acea-row row-between-wrapper\">\n          <input type=\"text\" :value=\"userInfo.uid\" disabled class=\"id\" /><span\n            class=\"iconfont icon-suozi\"\n          ></span>\n        </div>\n      </div>\n      <div v-if=\"!userInfo.phone\">\n        <router-link\n          :to=\"'/user/binding'\"\n          class=\"item acea-row row-between-wrapper\"\n        >\n          <div>绑定手机号</div>\n          <div class=\"input\">\n            点击绑定手机号<span class=\"iconfont icon-xiangyou\"></span>\n          </div>\n        </router-link>\n      </div>\n      <div class=\"item acea-row row-between-wrapper\" v-else-if=\"userInfo.phone\">\n        <div>手机号码</div>\n        <div class=\"input acea-row row-between-wrapper\">\n          <div class=\"input acea-row row-between-wrapper\">\n            <input\n              type=\"text\"\n              :value=\"userInfo.phone\"\n              disabled\n              class=\"id\"\n            /><span class=\"iconfont icon-suozi\"></span>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"userInfo.phone\">\n        <router-link\n          :to=\"'/change_password'\"\n          class=\"item acea-row row-between-wrapper\"\n        >\n          <div>密码</div>\n          <div class=\"input\">\n            点击修改密码<span class=\"iconfont icon-xiangyou\"></span>\n          </div>\n        </router-link>\n      </div>\n    </div>\n    <div class=\"modifyBnt bg-color-red\" @click=\"submit\">保存修改</div>\n    <div class=\"logOut cart-color acea-row row-center-wrapper\" @click=\"logout\">\n      退出登录\n    </div>\n  </div>\n</template>\n<script>\nimport { mapGetters } from \"vuex\";\nimport { trim, VUE_APP_API_URL, isWeixin } from \"@utils\";\nimport VueCoreImageUpload from \"vue-core-image-upload\";\nimport { postUserEdit, getLogout } from \"../../api/user\";\nimport { clearAuthStatus } from \"@libs/wechat\";\n\nexport default {\n  name: \"PersonalData\",\n  components: {\n    VueCoreImageUpload\n  },\n  data: function() {\n    return {\n      url: `${VUE_APP_API_URL}/upload/image`,\n      headers: {\n        Authorization: \"Bearer \" + this.$store.state.app.token\n      },\n      avatar: \"\",\n      isWeixin: false\n    };\n  },\n  watch: {\n    $route(n) {\n      if (n.name === \"PersonalData\") this.$store.dispatch(\"USERINFO\", true);\n    }\n  },\n  computed: mapGetters([\"userInfo\"]),\n  mounted: function() {\n    this.avatar = this.userInfo.avatar;\n    this.isWeixin = isWeixin();\n  },\n  methods: {\n    imageuploaded(res) {\n      if (res.status !== 200)\n        return this.$dialog.error(res.msg || \"上传图片失败\");\n      this.userInfo.avatar = res.data.url;\n      console.log(res.data);\n      this.$set(this, \"avatar\", res.data.url);\n    },\n    submit: function() {\n      postUserEdit({\n        nickname: trim(this.userInfo.nickname),\n        avatar: this.userInfo.avatar\n      }).then(\n        res => {\n          this.$store.dispatch(\"USERINFO\", true);\n          this.$dialog.success(res.msg);\n          this.$router.go(-1);\n        },\n        error => {\n          this.$dialog.error(error.msg);\n        }\n      );\n    },\n    logout: function() {\n      this.$dialog.confirm({\n        mes: \"确认退出登录?\",\n        opts: () => {\n          getLogout()\n            .then(res => {\n              this.$store.commit(\"LOGOUT\");\n              clearAuthStatus();\n              location.href = location.origin;\n              console.log(res);\n            })\n            .catch(err => {\n              console.log(err);\n            });\n        }\n      });\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PersonalData.vue?vue&type=template&id=4177aed8&\"\nimport script from \"./PersonalData.vue?vue&type=script&lang=js&\"\nexport * from \"./PersonalData.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}